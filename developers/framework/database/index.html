<!DOCTYPE html><html lang=en><head><meta charset=utf-8><title>Database Queries &middot; Vanilla Documentation</title><meta name=description content=""><meta name=viewport content="width=device-width"><link rel="shortcut icon" href=/assets/img/favicon.ico><link rel=stylesheet href="//fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,600,300italic,400italic,600italic"><link rel=stylesheet href=/assets/225ceaea.main.css><body><!--[if lt IE 9]>
      <p class="alert alert-warning text-center outdated-browser">You are using an <strong>outdated</strong> browser. Please <a class="alert-link" href="http://outdatedbrowser.com/">upgrade your browser</a> to improve your experience.</p>
    <![endif]--><div id=top></div><nav class="navbar navbar-default navbar-static-top" role=navigation><div class=container><!-- Brand and toggle get grouped for better mobile display --><div class=navbar-header><button type=button class=navbar-toggle data-toggle=collapse><span class=sr-only>Toggle navigation</span> <span class=icon-bar></span> <span class=icon-bar></span> <span class=icon-bar></span></button> <a class=navbar-brand href="/"><img class=logo src=/assets/img/logo.svg alt="Vanilla Forums"> Docs</a></div><!-- Collect the nav links, forms, and other content for toggling --><div class="collapse navbar-collapse"><div class="navbar-form navbar-left"><div id=search-docs class="dropdown{{hasResults ? ' open' : ' closed'}}" role=search><div class=form-group><input v-on=input:search class=form-control id=docs-search title="Search the documentation" placeholder=Search></div><ul class="dropdown-menu dropdown-search-results"><li v-repeat=results><a href={{url}}><span class=title>{{title}}</span> <span class=categories>{{categories.join(' / ')}}</span></a></li></ul></div></div><ul class="nav navbar-nav navbar-right"><li><a href=http://vanillaforums.com>Cloud Hosted Community</a></li><li><a href=http://vanillaforums.org>Open Source Community</a></li></ul></div></div></nav><header class="jumbotron masthead" role=banner><div class=container><h1>Database Queries</h1></div></header><div class=container><ol class=breadcrumb><li itemscope itemtype=http://data-vocabulary.org/Breadcrumb><a href="/" itemprop=url><span itemprop=title>Home</span></a></li><li itemscope itemtype=http://data-vocabulary.org/Breadcrumb><a href=/developers itemprop=url><span itemprop=title>Developers</span></a></li><li itemscope itemtype=http://data-vocabulary.org/Breadcrumb><a href=/developers/framework itemprop=url><span itemprop=title>Framework</span></a></li><li class=active itemscope itemtype=http://data-vocabulary.org/Breadcrumb><span itemprop=title>Database Queries</span></li></ol><div class=row><div class=col-sm-2><nav class="docs-nav js-docs-nav" role=navigation><ul class="nav nav-stacked"><li><a href=/addons>Addons</a><ul class="nav nav-stacked"><li><a href=/addons/badges>Badges</a><ul class="nav nav-stacked"><li><a href=/addons/badges/adding-and-editing-badges>Adding and Editing Badges</a></li><li><a href=/addons/badges/giving-and-requesting-badges>Giving and Requesting Badges</a></li></ul></li><li><a href=/addons/gigya>Gigya Sign In</a></li><li><a href=/addons/groups>Groups</a><ul class="nav nav-stacked"><li><a href=/addons/groups/managing-groups>Managing Groups</a></li></ul></li><li><a href=/addons/pockets>Introduction to Pockets</a></li><li><a href=/addons/ranks>Ranks</a><ul class="nav nav-stacked"><li><a href=/addons/ranks/adding-and-editing-ranks>Adding and Editing Ranks</a></li><li><a href="/addons/ranks/applying-ranks-over sso">Applying Ranks over SSO</a></li><li><a href=/addons/ranks/using-ranks-as-incentives>Using Ranks as Incentives</a></li><li><a href=/addons/ranks/using-ranks-to-defeat-spam-or-abuse>Using Ranks to Defeat Spam or Abuse</a></li></ul></li><li><a href=/addons/reactions>Reactions</a><ul class="nav nav-stacked"><li><a href=/addons/reactions/curating-with-reactions>Curating with Reactions</a></li><li><a href=/addons/reactions/adding-and-editing-reactions>Adding and Editing Reactions</a></li></ul></li><li><a href=/addons/reporting>Reporting</a></li><li><a href=/addons/statistics>Vanilla Statistics</a></li><li><a href=/addons/warnings-and-notes>Warnings and Notes</a><ul class="nav nav-stacked"><li><a href=/addons/warnings-and-notes/adding-and-editing-user-notes>Adding and Editing User Notes</a></li><li><a href=/addons/warnings-and-notes/upgrading-from-warnings>Upgrading from Warnings</a></li><li><a href=/addons/warnings-and-notes/warning-a-user>Warning a User</a></li></ul></li></ul></li><li><a href=/cloud>Cloud Services</a><ul class="nav nav-stacked"><li><a href=/cloud/integration>Integration Services</a></li><li><a href=/cloud/migration>Migration Services</a></li><li><a href=/cloud/repo>Repository</a></li><li><a href=/cloud/ssl>Setting up SSL (https)</a></li><li><a href=/cloud/staging>Staging Site</a></li><li><a href=/cloud/support>Support</a></li><li><a href=/cloud/theming>Theming Services</a></li></ul></li><li><a href=/api>API</a><ul class="nav nav-stacked"><li><a href=/api/forum-administration>Forum Administration</a></li><li><a href=/api/smart-id>Smart ID</a></li><li><a href=/api/categories>Categories</a></li><li><a href=/api/comments>Comments</a></li><li><a href=/api/discussions>Discussions</a></li></ul></li><li class=active><a href=/developers>Developers</a><ul class="nav nav-stacked"><li><a href=/developers/changelog>Changelog</a></li><li><a href=/developers/troubleshooting>Troubleshooting</a></li><li><a href=/developers/installation>Installation</a></li><li><a href=/developers/locales>Locales</a></li><li><a href=/developers/tools>Developer Tools</a></li><li><a href=/developers/community>Developers Community</a></li><li><a href=/developers/contributing>Contributing</a><ul class="nav nav-stacked"><li><a href=/developers/contributing/coding-standard>Coding Standard</a></li><li><a href=/developers/contributing/standards>Coding Standards</a></li></ul></li><li class=active><a href=/developers/framework>Framework</a><ul class="nav nav-stacked"><li><a href=/developers/framework/ajax>Asynchronous Requests</a></li><li><a href=/developers/framework/views>Views</a></li><li><a href=/developers/framework/controllers>Controllers</a></li><li class=active><a href=/developers/framework/database>Database Queries</a></li><li><a href=/developers/framework/dispatcher>Dispatcher</a></li><li><a href=/developers/framework/helpers>Helpers</a></li><li><a href=/developers/framework/assets>Assets</a></li><li><a href=/developers/framework/inform>Inform Notifications</a></li><li><a href=/developers/framework/models>Models and Forms</a></li><li><a href=/developers/framework/modules>Modules</a></li><li><a href=/developers/framework/permissions>Permissions</a></li><li><a href=/developers/framework/i18n>Internationalization &amp; Localization</a></li></ul></li><li><a href=/developers/importing>Importing</a><ul class="nav nav-stacked"><li><a href=/developers/importing/build>Building new porters</a></li><li><a href=/developers/importing/porter>Vanilla Porter</a></li><li><a href=/developers/importing/support>Supported platforms</a></li></ul></li><li><a href=/developers/plugins>Plugins</a><ul class="nav nav-stacked"><li><a href=/developers/plugins/quickstart>Plugin Quickstart</a></li></ul></li><li><a href=/developers/configuration>Configuration</a><ul class="nav nav-stacked"><li><a href=/developers/configuration/using>Using The Config</a></li></ul></li></ul></li><li><a href=/features>Features</a><ul class="nav nav-stacked"><li><a href=/features/categories>Categories</a></li><li><a href=/features/embedding>Embedding</a></li><li><a href=/features/mobile>Mobile</a></li><li><a href=/features/moderation>Moderation</a></li><li><a href=/features/notifications>Notifications</a></li><li><a href=/features/setup>Setting Up Your New Forum</a></li><li><a href=/features/sso>Single Sign-On</a></li><li><a href=/features/wordpress>WordPress Integration</a><ul class="nav nav-stacked"><li><a href=/features/wordpress/using-comments>Using Comments</a></li><li><a href=/features/wordpress/wishlist>WishList Integration</a></li></ul></li></ul></li><li><a href=/theming>Theming</a><ul class="nav nav-stacked"><li><a href=/theming/css>Theming CSS</a></li><li><a href=/theming/hooks>Theming Hooks</a></li><li><a href=/theming/quickstart>Theming Quickstart</a></li><li><a href=/theming/views>Theming Views</a></li><li><a href=/theming/smarty>Smarty</a><ul class="nav nav-stacked"><li><a href=/theming/smarty/asset>{asset}</a></li><li><a href=/theming/smarty/text>{text}</a></li><li><a href=/theming/smarty/custom-menu>{custom_menu}</a></li><li><a href=/theming/smarty/event>{event}</a></li><li><a href=/theming/smarty/i18n>{t}</a></li><li><a href=/theming/smarty/link>{link}</a></li><li><a href=/theming/smarty/breadcrumbs>{breadcrumbs}</a></li><li><a href=/theming/smarty/mobile-logo>{mobile_logo}</a></li><li><a href=/theming/smarty/permission>{permission}</a></li><li><a href=/theming/smarty/pocket>{pocket}</a></li><li><a href=/theming/smarty/searchbox>{searchbox}</a></li><li><a href=/theming/smarty/logo>{logo}</a></li></ul></li></ul></li></ul><p><a class=text-muted href=#top><strong>Back to top</strong></a></p></nav></div><div class=col-sm-10><div class="edit-doc pull-right"><a class="btn btn-default btn-xs" href=https://github.com/vanilla/vanilladocs/edit/master/docs/developers/framework/database.html.md>Improve document</a></div><article class=markdown-body role=article><p>The database files are located in /GardenRoot/library/database, and are as follows:</p><center><img class=Border title="Database Files" src=http://markosullivan.ca/blog/wp-content/uploads/2008/12/fs-database.gif alt="" width=255 height=183></center><p><strong>class.database.php</strong>: The main database file that is included by the Garden bootstrapper. <strong>class.databasestructure.php</strong>: A supplemental implementation of the database class specific to altering table (and view) structure in the database. This file is included on-demand. <strong>class.dataset.php</strong>: The dataset class allows you to traverse, manipulate, and return data objects or arrays. <strong>class.generic.driver.php</strong>: An abstract implementation of all properties and methods used to build and execute database queries. <strong>class.generic.structure.php</strong>: An abstract implementation of all properties and methods used to build and execute database queries specific to altering database (and view) structure. <strong>class.mysql.driver.php</strong>: A MySQL-specific implementation of the class.generic.driver.php abstract class. This class overrides the generic class where necessary in order to perform functions specific to MySQL. <strong>class.mysql.structure.php</strong>: A MySQL-specific implementation of the class.generic.structure.php abstract class. This class overrides the generic class where necessary in order to perform functions related to altering database (and view) structure specific to MySQL.</p><h2>Putting it all Together</h2><p>As you can likely imagine, the MySQL-specific files are just one implementation of the generic driver and structure. Theoretically I could create other database-specific files and use those instead. When I first started working on the classes, for example, I created two other implementations: SQLite and <a href="http://markosullivan.ca/blog/?p=83">Microsoft SQL Server</a>. MySQL is the only implementation planned for launch, but others may come afterwards. With this in mind, the class.database.php file contains the following:</p>// Include the base/generic driver and dataset classes include(PATH<em>LIBRARY . DS . &#39;database&#39; . DS . &#39;class.generic.driver.php&#39;); include(PATH_LIBRARY . DS . &#39;database&#39; . DS . &#39;class.dataset.php&#39;); // Include the selected driver class $DatabaseEngine = $Config-&gt;Get(&#39;Database.Engine&#39;); include(PATH_LIBRARY . DS . &#39;database&#39; . DS . &#39;class.&#39;.strtolower($DatabaseEngine).&#39;.driver.php&#39;); // Create a standard database class extended from the selected driver. eval(&#39;class Database extends &#39;.$DatabaseEngine.&#39;Driver {}&#39;);<p>So, as you can see, the first thing I do is include the generic driver and the dataset classes. These are required in order to perform any database requests. Next up I grab the defined database engine from the configuration (in it&#39;s current state: MySQL), and include the driver for that class. Finally, I create a class simply called &quot;Database&quot; that extends the driver-specific class. So, no matter what driver is implemented, you can always get at your database class by instantiating a <code>new Database();</code></p><h2>Using the Database class</h2><p><em>Note: The Database class uses PDO to query the database. This is never apparent outside of the class, but is a point of interest to some.</em>The database class allows you to do everything from querying with a straight SQL string, to building a sql string and executing it with various Database methods, to one-line convenience methods that return a dataset with a single line of code. My main goal was to add flexibility. Let&#39;s start with an example of building a simple select statement. Imagine you wanted to use the database class to query the following information:</p>select Name ,Color ,MaxSpeed from Car where MaxSpeed &gt; 80;<p>In it&#39;s most simple form, the Database class could be used to retrieve this information by placing that SQL into a $Sql variable and calling the following:</p>$DataSet = $Database-&gt;Query($Sql);<p>However, this is not really the preferred method. After all, what happens down the road when we implement a new database class with a different driver that doesn&#39;t support the exact same syntax as MySQL? So, let&#39;s build the same query using the Database class&#39; various query building methods:</p>$Database-&gt;Select(&#39;Name, Color, MaxSpeed&#39;); $Database-&gt;From(&#39;Car&#39;); $Database-&gt;Where(&#39;MaxSpeed &gt;&#39;, &#39;80&#39;); $DataSet = $Database-&gt;Get();<p>Fairly simple, but the Database query building methods also implement chaining. So, this query could have just as easily been written in the following manner:</p>$DataSet = $Database-&gt;Select(&#39;Name, Color, MaxSpeed&#39;)-&gt;From(&#39;Car&#39;)-&gt;Where(&#39;MaxSpeed &gt;&#39;, &#39;80&#39;)-&gt;Get();<p>Neat! But the Database class also has a bunch of different convenience methods. So, let&#39;s try building the same query using Database::GetWhere():</p>$DataSet = $Database-&gt;GetWhere(&#39;Car&#39;, array(&#39;MaxSpeed &gt;&#39; =&gt; &#39;80&#39;));<p>OK, so we can retrieve data from the database in various different ways. Let&#39;s try a more complex example with some joins. How about this:</p>select Car.Name ,Car.Color ,Car.MaxSpeed ,Brand.Name as Brand ,Engine.Name as Engine from Car inner join Brand on Car.BrandID = Brand.BrandID inner join Engine on Car.EngineID = Engine.EngineID where Car.MaxSpeed &gt; 80;<p>Piece of cake:</p>$DataSet = $Database-&gt;Select(&#39;Car.Name, Car.Color, Car.MaxSpeed&#39;) -&gt;Select(&#39;Brand.Name&#39;, &#39;&#39;, &#39;Brand&#39;) -&gt;Select(&#39;Engine.Name&#39;, &#39;&#39;, &#39;Engine&#39;) -&gt;From(&#39;Car&#39;) -&gt;Join(&#39;Brand&#39;, &#39;Car.BrandID = Brand.BrandID&#39;) -&gt;Join(&#39;Engine&#39;, &#39;Car.EngineID = Engine.EngineID&#39;) -&gt;Where(&#39;Car.MaxSpeed &gt;&#39;, &#39;80&#39;) -&gt;Get();<p>But that&#39;s a bit verbose. How about if we used aliases instead, like this:</p>select c.Name ,c.Color ,c.MaxSpeed ,b.Name as Brand ,e.Name as Engine from Car c inner join Brand b on c.BrandID = b.BrandID inner join Engine e on c.EngineID = e.EngineID where c.MaxSpeed &gt; 80;<p>Not a problem:</p>$DataSet = $Database-&gt;Select(&#39;c.Name, c.Color, c.MaxSpeed&#39;) -&gt;Select(&#39;b.Name&#39;, &#39;&#39;, &#39;Brand&#39;) -&gt;Select(&#39;e.Name&#39;, &#39;&#39;, &#39;Engine&#39;) -&gt;From(&#39;Car c&#39;) -&gt;Join(&#39;Brand b&#39;, &#39;c.BrandID = b.BrandID&#39;) -&gt;Join(&#39;Engine e&#39;, &#39;c.EngineID = e.EngineID&#39;) -&gt;Where(&#39;c.MaxSpeed &gt;&#39;, &#39;80&#39;) -&gt;Get();<p>And how about if we added some more conditions to the where clause? You could continue to add lines to the query:</p>// ... $Database-&gt;Where(&#39;c.MaxSpeed &gt;&#39;, &#39;80&#39;); $Database-&gt;Where(&#39;c.Color&#39;, &#39;Blue&#39;);<p>Or you could simply manipulate your original where definition to use an associative array of conditions:</p>// ... $Database-&gt;Where(array(&#39;c.MaxSpeed &gt;&#39; =&gt; &#39;80&#39;, &#39;c.Color&#39; =&gt; &#39;Blue&#39;));<p>You might be wondering how the database class handles database table prefixes. For example, in Vanilla 1, all of the vanilla-related tables were prefixed with &quot;LUM</p></em>&quot;. So, what if our example tables had the LUM_ prefix? How would that change our Database class&#39; method calls?select c.Name ,c.Color ,c.MaxSpeed ,b.Name as Brand ,e.Name as Engine from LUM_Car c inner join LUM_Brand b on c.BrandID = b.BrandID inner join LUM_Engine e on c.EngineID = e.EngineID where c.MaxSpeed &gt; 80;<p>The simple answer is that it wouldn&#39;t. You&#39;d still specify all of the queries in the ways I&#39;ve defined above. The database class has a &quot;DatabasePrefix&quot; property that is defined by the Garden bootstrapper (and can be changed at any time on the fly). You never need to concern yourself with database table prefixes. The Database class will search and prepend them where necessary as queries are built.</p><h3>Connection</h3><p>One final thing to note is that the database class lazy-loads the database connection. This means that there are no connections to the database opened until you actually run a query. So, if a page doesn&#39;t require any database access, the database class will never open a connection unnecessarily.</p><h2>DataSets</h2><p>In all of the examples above, the database queries have resulted in returning a variable I&#39;ve called $DataSet. This $DataSet variable is actually an object instantiation of the DataSet class in the class.dataset.php file discussed above. The DataSet class is used to traverse the dataset that was created as a result of the query, and return the rows of data in either associative array or object format. Once again, flexibility is the purpose. Let&#39;s see some examples of what we can do with a DataSet object:</p>// See how many rows were returned by the query: $NumRows = $DataSet-&gt;NumRows(); // Get the first row in the dataset: $FirstRow = $DataSet-&gt;FirstRow(); // And do something with it: print_r($FirstRow); // Would print: stdClass Object ( [Name] =&gt; &#39;Civic&#39; [Color] =&gt; &#39;White&#39; [MaxSpeed] =&gt; &#39;120&#39; [Brand] =&gt; &#39;Honda&#39; [Engine] =&gt; &#39;Sad&#39; ) // Or, get the first row as an associative array, instead: $FirstRow = $DataSet-&gt;FirstRow(&#39;&#39;, DATASET_TYPE_ARRAY); // And do something with it: print_r($FirstRow); // Would print: Array ( [Name] =&gt; &#39;Civic&#39; [Color] =&gt; &#39;White&#39; [MaxSpeed] =&gt; &#39;120&#39; [Brand] =&gt; &#39;Honda&#39; [Engine] =&gt; &#39;Sad&#39; )<p>And for one more example on using DataSets, here&#39;s how one might decide to traverse a set of data:</p><pre class=highlight><code class="hljs xml"> <span class=php><span class=hljs-preprocessor>&lt;?php</span> <span class=hljs-keyword>foreach</span> (<span class=hljs-variable>$DataSet</span>-&gt;Result() <span class=hljs-keyword>as</span> <span class=hljs-variable>$Car</span>) {
    <span class=hljs-keyword>echo</span> <span class=hljs-string>"This car is "</span>. <span class=hljs-variable>$Car</span>-&gt;Color.<span class=hljs-string>", it has a $Car-&gt;Engine.
       "</span> engine, <span class=hljs-keyword>and</span> it goes <span class=hljs-string>". $Car-&gt;MaxSpeed."</span>KM/h<span class=hljs-string>";
 } ?&gt;</span></span><span class=hljs-tag>&lt;/<span class=hljs-title>pre</span>&gt;</span>
</code></pre><h2>Database Objects</h2><p>Most open-source web applications have database setup scripts that are simply a set of SQL instructions that you can inject directly into your database (typically mysql) to get going. Vanilla 1 was no exception to this rule. The benefit of this approach is that you can quickly and easily get your app up and running. The downside to this approach is that when it is time to upgrade the application to a newer version, you have to write extremely convoluted scripts to figure out what application version the user currently user has, or write scripts to examine database table structure to see what fields need to be removed, or what fields need to be added. Hell, it&#39;s even difficult to understand what I just wrote, let alone the code that would go along with it.</p><h2>The Database Structure Class</h2><p>Garden does not have any SQL install or update scripts. Instead, every application in garden has a structure.php file which can be used by either the Garden installer, or by the application management screen when enabling that application. The structure.php file contains a set of instructions on how to build the structure of the database. This file uses the DatabaseStructure class to define the structure of the database. The class itself is extremely simple to use. Like the database class, the DatabaseStructure class uses method chaining, and it contains methods to create/drop/rename tables, create/drop/rename table columns, and create/modify views.</p><h2>Tables &amp; Columns</h2><p>Each application&#39;s structure.php file resides in that application&#39;s &quot;settings&quot; folder (the same folder that contains the appliation&#39;s about.php file). So, the structure file for Garden resides in <code>/path/to/root/applications/garden/settings/structure.php</code>. Let&#39;s take a look at an example of how I create the user table in Garden:</p>// User Table $Construct-&gt;Table(&#39;User&#39;) -&gt;Column(&#39;UserID&#39;, &#39;int&#39;, 10, FALSE, NULL, &#39;primary&#39;, TRUE) -&gt;Column(&#39;PhotoID&#39;, &#39;int&#39;, 8, TRUE, NULL, &#39;key&#39;) -&gt;Column(&#39;Name&#39;, &#39;varchar&#39;, 20, FALSE, NULL, &#39;key&#39;) -&gt;Column(&#39;Password&#39;, &#39;varchar&#39;, 32) -&gt;Column(&#39;About&#39;, &#39;text&#39;, &#39;&#39;, TRUE) -&gt;Column(&#39;Email&#39;, &#39;varchar&#39;, 200) -&gt;Column(&#39;ShowEmail&#39;, array(&#39;1&#39;, &#39;0&#39;), &#39;&#39;, FALSE, &#39;0&#39;) -&gt;Column(&#39;Gender&#39;, array(&#39;m&#39;, &#39;f&#39;), &#39;&#39;, FALSE, &#39;m&#39;) -&gt;Column(&#39;CountVisits&#39;, &#39;int&#39;, 8, FALSE, &#39;0&#39;) -&gt;Column(&#39;CountInvitations&#39;, &#39;int&#39;, 2, FALSE, &#39;0&#39;) -&gt;Column(&#39;InviteUserID&#39;, &#39;int&#39;, 10, TRUE) -&gt;Column(&#39;DiscoveryText&#39;, &#39;text&#39;, &#39;&#39;, TRUE) -&gt;Column(&#39;Preferences&#39;, &#39;text&#39;, &#39;&#39;, TRUE) -&gt;Column(&#39;Permissions&#39;, &#39;text&#39;, &#39;&#39;, TRUE) -&gt;Column(&#39;Attributes&#39;, &#39;text&#39;, &#39;&#39;, TRUE) -&gt;Column(&#39;DateSetInvitations&#39;, &#39;datetime&#39;, &#39;&#39;, TRUE) -&gt;Column(&#39;DateOfBirth&#39;, &#39;datetime&#39;, &#39;&#39;, TRUE) -&gt;Column(&#39;DateFirstVisit&#39;, &#39;datetime&#39;, &#39;&#39;, TRUE) -&gt;Column(&#39;DateLastActive&#39;, &#39;datetime&#39;, &#39;&#39;, TRUE) -&gt;Column(&#39;DateInserted&#39;, &#39;datetime&#39;) -&gt;Column(&#39;DateUpdated&#39;, &#39;datetime&#39;, &#39;&#39;, TRUE) -&gt;Column(&#39;HourOffset&#39;, &#39;int&#39;, 2, FALSE, &#39;0&#39;) -&gt;Set(TRUE, FALSE);<p>The hardest part of understanding this SQL is knowing what each of the arguments in the &quot;Column&quot; method are. I&#39;ve done my best to keep these arguments similar to the way they appear when writing a column definition in SQL. Let&#39;s take a look at all of the arguments:</p>public function Column( $Name, $Type, $Length = &#39;&#39;, $Null = FALSE, $Default = NULL, $KeyType = FALSE, $AutoIncrement = FALSE ) { }<p><strong>Name (string):</strong> The name of the column to create. <strong>Type (mixed):</strong> The data type of the column to be created. If an array of values is provided, the type will be set as &quot;enum&quot; and the array will be assigned as the column&#39;s Enum property. <strong>Length (mixed, not required, default &quot;empty&quot;):</strong> The length of the column. <strong>Null (bool, not required, default FALSE):</strong> Does the column allow null values. <strong>Default (mixed, not required, default NULL):</strong> The default value of the column. If NULL is provided (default), there will be no default value. <strong>KeyType (string, not required, default FALSE):</strong> What type of key is this column on the table. Options are primary, key, and FALSE (not a key). <strong>AutoIncrement (bool, not required, default FALSE):</strong>A boolean value indicating if this column auto-increments. Once you master the arguments for the column method, building and altering tables is a breeze. The Set() method (used above to execute the creation of the user table) also has some important arguments:</p>public function Set( $Explicit = FALSE, $Drop = FALSE ) {}<p>The Set method creates the table and columns specified with $this-&gt;Table() and $this-&gt;Column(). If no table or columns have been specified, this method will throw a fatal error. <strong>Explicit (bool, not required, default FALSE):</strong> If TRUE, and the table specified with $this-&gt;Table() already exists, this method will remove any columns from the table that were not defined with $this-&gt;Column(). <strong>Drop (bool, not required, default FALSE):</strong> If TRUE, and the table specified with $this-&gt;Table() already exists, this method will drop the table before attempting to re-create it. As you can imagine, these are some pretty powerful commands that you must pay close attention to. In 90% of my structure scripts, Explicit is TRUE, and Drop is FALSE. Despite this fact, I have kept both arguments FALSE by default so that tables are not dropped and columns are not removed if a user does not know what they are doing. As I mentioned, there are other methods available to you if you don&#39;t want to redefine an entire table, but you do want to add or remove columns (or drop entire tables). Those are: <strong>Drop</strong> (allows you to drop a table), <strong>RenameTable</strong>, <strong>DropColumn</strong>, and <strong>RenameColumn</strong>.</p><h2>Views</h2><p>Using the database class, you can also quickly and easily build a query and turn it into a view. Here is an example of building a view:</p>$View = $Database-&gt;Select(&#39;rp.*&#39;) -&gt;Select(&#39;p.Name&#39;, &#39;&#39;, &#39;Permission&#39;) -&gt;From(&#39;RolePermission rp&#39;) -&gt;Join(&#39;Permission p&#39;, &#39;rp.PermissionID = p.PermissionID&#39;) -&gt;GetSelect(); $Construct-&gt;View(&#39;vw_RolePermission&#39;, $View);<h2>Benefits</h2><p>Why did I bother building this class? I originally got the idea because I found that I was keeping a SQL script that I would constantly make changes to, and re-run on the database, essentially wiping out my test data every time. It got me thinking about how upgrades are difficult because of database structure changes. I ended up writing this class in a very short amount of time, and then spending a lot of time turning my rather large SQL script into a structure.php file. I was delighted to discover that changes made to my structure.php file would quickly and easily apply to the database with a quick run of the file. So, I could easily add a column to a table definition, run my structure script, and go back to happily using the application, and making use of my new column, while all of my testing data remained intact. This means that when you release new versions of your applications, all you need to do is update your structure file (which you will likely be doing as you add features and fix bugs), and all database structure changes apply when the application is re-enabled by the user. This class can also be used by plugins to quickly and easily add (or remove) columns from tables (or even create tables). The sky is the limit. This class has gone far beyond my initial hopes. At this point I don&#39;t anticipate ever writing an upgrade script for any application in Garden. Everything should be handled by the application management screen, or the initial install script that comes prepackaged with Garden.</p></article></div></div></div><footer class="footer js-footer"><div class=jumbotron><div class=container><div class=row><div class=col-sm-6><h3><a href=#>Cloud Hosting</a></h3><p><strong>We believe that online communities should be intuitive, engaging and true to your brand.</strong> Vanilla allows you to create a customized community that rewards positive participation, automatically curates content and lets members drive moderation.</p></div><div class=col-sm-6><h3><a href=#>Open Source</a></h3><p>Vanilla provides cloud and open source community forum software that powers discussion forums on more than 700,000 sites. Built for flexibility and integration, <strong>Vanilla is the best, most powerful community solution in the world.</strong></p></div></div></div></div><div class=footer-copyright><div class=container><p class=text-center>Copyright &copy; 2009-2014 <a href=//vanillaforums.com>Vanilla Forums Inc.</a> All rights reserved.</p><ul class="list-inline text-center"><li><a href=//docs.vanillaforums.com>Docs</a></li><li><a href=//blog.vanillaforums.com>Blog</a></li><li><a href=//vanillaforums.com>Cloud</a></li><li><a href=//vanillaforums.org>Community</a></li><li><a href=https://github.com/vanilla>GitHub</a></li><li><a href=https://github.com/vanilla/vanilla/issues>Issues</a></li></ul></div></div></footer><script src=/assets/974b85ae.main.js></script>