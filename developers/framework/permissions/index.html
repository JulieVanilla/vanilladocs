<!DOCTYPE html><html lang=en><head><meta charset=utf-8><title>Permissions &middot; Vanilla Documentation</title><meta name=description content=""><meta name=viewport content="width=device-width"><link rel=stylesheet href="//fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,600,300italic,400italic,600italic"><link rel=stylesheet href=/assets/5148b2c4.main.css><body><!--[if lt IE 9]>
      <p class="browsehappy">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> to improve your experience.</p>
    <![endif]--><div id=top></div><nav class="navbar navbar-default navbar-static-top" role=navigation><div class=container><!-- Brand and toggle get grouped for better mobile display --><div class=navbar-header><button type=button class=navbar-toggle data-toggle=collapse><span class=sr-only>Toggle navigation</span> <span class=icon-bar></span> <span class=icon-bar></span> <span class=icon-bar></span></button> <a class=navbar-brand href="/"><img class=logo src=/assets/img/logo.svg alt="Vanilla Forums"> Docs</a></div><!-- Collect the nav links, forms, and other content for toggling --><div class="collapse navbar-collapse"><div class="navbar-form navbar-left"><div id=search-docs class="dropdown{{hasResults ? ' open' : ' closed'}}" role=search><div class=form-group><input v-on=input:search class=form-control id=docs-search title="Search the documentation" placeholder=Search></div><ul class="dropdown-menu dropdown-search-results"><li v-repeat=results><a href={{url}}><span class=title>{{title}}</span> <span class=categories>{{categories.join(' / ')}}</span></a></li></ul></div></div><ul class="nav navbar-nav navbar-right"><li><a href=https://vanillaforums.org>Open Source Community</a></li></ul></div></div></nav><header class="jumbotron masthead" role=banner><div class=container><h1>Permissions</h1></div></header><div class=container><ol class=breadcrumb><li><a href="/">Home</a></li><li><a href=/developers>Developers</a></li><li><a href=/developers/framework>Framework</a></li><li class=active>Permissions</li></ol><div class=row><div class=col-sm-2><nav class="docs-nav js-docs-nav" role=navigation><ul class="nav nav-stacked"><li><a href=/addons>Addons</a><ul class="nav nav-stacked"><li><a href=/addons/badges>Badges</a><ul class="nav nav-stacked"><li><a href=/addons/badges/giving-and-requesting-badges>Giving and Requesting Badges</a></li><li><a href=/addons/badges/adding-and-editing-badges>Adding and Editing Badges</a></li></ul></li><li><a href=/addons/gigya>Gigya Sign In</a></li><li><a href=/addons/groups>Groups</a><ul class="nav nav-stacked"><li><a href=/addons/groups/managing-groups>Managing Groups</a></li></ul></li><li><a href=/addons/ranks>Ranks</a><ul class="nav nav-stacked"><li><a href=/addons/ranks/adding-and-editing-ranks>Adding and Editing Ranks</a></li><li><a href="/addons/ranks/applying-ranks-over sso">Applying Ranks over SSO</a></li><li><a href=/addons/ranks/using-ranks-as-incentives>Using Ranks as Incentives</a></li><li><a href=/addons/ranks/using-ranks-to-defeat-spam-or-abuse>Using Ranks to Defeat Spam or Abuse</a></li></ul></li><li><a href=/addons/pockets>Introduction to Pockets</a></li><li><a href=/addons/reactions>Reactions</a><ul class="nav nav-stacked"><li><a href=/addons/reactions/adding-and-editing-reactions>Adding and Editing Reactions</a></li><li><a href=/addons/reactions/curating-with-reactions>Curating with Reactions</a></li></ul></li><li><a href=/addons/warnings-and-notes>Warnings and Notes</a><ul class="nav nav-stacked"><li><a href=/addons/warnings-and-notes/adding-and-editing-user-notes>Adding and Editing User Notes</a></li><li><a href=/addons/warnings-and-notes/upgrading-from-warnings>Upgrading from Warnings</a></li><li><a href=/addons/warnings-and-notes/warning-a-user>Warning a User</a></li></ul></li><li><a href=/addons/reporting>Reporting</a></li></ul></li><li><a href=/cloud>Cloud Services</a><ul class="nav nav-stacked"><li><a href=/cloud/integration>Integration Services</a></li><li><a href=/cloud/migration>Migration Services</a></li><li><a href=/cloud/repo>Repository</a></li><li><a href=/cloud/ssl>Setting up SSL (https)</a></li><li><a href=/cloud/staging>Staging Site</a></li><li><a href=/cloud/theming>Theming Services</a></li><li><a href=/cloud/support>Support</a></li></ul></li><li class=active><a href=/developers>Developers</a><ul class="nav nav-stacked"><li><a href=/developers/changelog>Changelog</a></li><li class=active><a href=/developers/framework>Framework</a><ul class="nav nav-stacked"><li><a href=/developers/framework/controllers>Controllers</a></li><li><a href=/developers/framework/views>Views</a></li><li><a href=/developers/framework/assets>Assets</a></li><li><a href=/developers/framework/database>Database Queries</a></li><li><a href=/developers/framework/dispatcher>Dispatcher</a></li><li><a href=/developers/framework/helpers>Helpers</a></li><li><a href=/developers/framework/ajax>Asynchronous Requests</a></li><li><a href=/developers/framework/inform>Inform Notifications</a></li><li><a href=/developers/framework/models>Models and Forms</a></li><li><a href=/developers/framework/modules>Modules</a></li><li class=active><a href=/developers/framework/permissions>Permissions</a></li><li><a href=/developers/framework/i18n>Internationalization &amp; Localization</a></li></ul></li><li><a href=/developers/installation>Installation</a></li><li><a href=/developers/locales>Locales</a></li><li><a href=/developers/tools>Developer Tools</a></li><li><a href=/developers/community>Developers Community</a></li><li><a href=/developers/importing>Importing</a><ul class="nav nav-stacked"><li><a href=/developers/importing/build>Building new porters</a></li><li><a href=/developers/importing/porter>Vanilla Porter</a></li><li><a href=/developers/importing/support>Supported platforms</a></li></ul></li><li><a href=/developers/plugins>Plugins</a><ul class="nav nav-stacked"><li><a href=/developers/plugins/quickstart>Plugin Quickstart</a></li></ul></li><li><a href=/developers/troubleshooting>Troubleshooting</a></li><li><a href=/developers/contributing>Contributing</a><ul class="nav nav-stacked"><li><a href=/developers/contributing/coding-standard>Coding Standard</a></li><li><a href=/developers/contributing/standards>Coding Standards</a></li></ul></li><li><a href=/developers/configuration>Configuration</a><ul class="nav nav-stacked"><li><a href=/developers/configuration/using>Using The Config</a></li></ul></li></ul></li><li><a href=/features>Features</a><ul class="nav nav-stacked"><li><a href=/features/mobile>Mobile</a></li><li><a href=/features/categories>Categories</a></li><li><a href=/features/embedding>Embedding</a></li><li><a href=/features/moderation>Moderation</a></li><li><a href=/features/notifications>Notifications</a></li><li><a href=/features/setup>Setting Up Your New Forum</a></li><li><a href=/features/sso>Single Sign-On</a></li><li><a href=/features/wordpress>WordPress Integration</a><ul class="nav nav-stacked"><li><a href=/features/wordpress/using-comments>Using Comments</a></li><li><a href=/features/wordpress/wishlist>WishList Integration</a></li></ul></li></ul></li><li><a href=/api>API</a><ul class="nav nav-stacked"><li><a href=/api/categories>Categories</a></li><li><a href=/api/comments>Comments</a></li><li><a href=/api/discussions>Discussions</a></li><li><a href=/api/forum-administration>Forum Administration</a></li><li><a href=/api/smart-id>Smart ID</a></li></ul></li><li><a href=/theming>Theming</a><ul class="nav nav-stacked"><li><a href=/theming/css>Theming CSS</a></li><li><a href=/theming/quickstart>Theming Quickstart</a></li><li><a href=/theming/views>Theming Views</a></li><li><a href=/theming/hooks>Theming Hooks</a></li><li><a href=/theming/smarty>Smarty</a><ul class="nav nav-stacked"><li><a href=/theming/smarty/asset>{asset}</a></li><li><a href=/theming/smarty/text>{text}</a></li><li><a href=/theming/smarty/custom-menu>{custom_menu}</a></li><li><a href=/theming/smarty/event>{event}</a></li><li><a href=/theming/smarty/i18n>{t}</a></li><li><a href=/theming/smarty/link>{link}</a></li><li><a href=/theming/smarty/breadcrumbs>{breadcrumbs}</a></li><li><a href=/theming/smarty/mobile-logo>{mobile_logo}</a></li><li><a href=/theming/smarty/permission>{permission}</a></li><li><a href=/theming/smarty/pocket>{pocket}</a></li><li><a href=/theming/smarty/searchbox>{searchbox}</a></li><li><a href=/theming/smarty/logo>{logo}</a></li></ul></li></ul></li></ul><p><a class=text-muted href=#top><strong>Back to top</strong></a></p></nav></div><div class=col-sm-10><div class="edit-doc pull-right"><a class="btn btn-default btn-xs" href=https://github.com/vanilla/vanilladocs/edit/master/docs/developers/framework/permissions.html.md>Improve document</a></div><article class=markdown-body role=article><h2 id=permissions-overview>Permissions Overview</h2><p>Vanilla uses permissions to restrict access particular content, options, or workflows. There are a number of functions built into the framework to do this efficiently. We eschew role-detection as a means of access control.</p><p>For example, we would never check to makde sure someone was in a role named Moderator before granting access to an option, we would check a permission like <code>Garden.Moderation.Manage</code>.</p><h3 id=naming-permissions>Naming Permissions</h3><p>We use the same dot notation syntax for permissions as we do for config settings. A typical scheme would be: <code>Namespace.Keyword.Action</code>.</p><p>For instance, look at <code>Vanilla.Discussions.Add</code>. This permissions is registered by the Vanilla application, is related to discussions, and is specifically for adding.</p><p>For the Namespace (first dot tier), use the slug name of your addon. The <code>Plugins</code> namespace is deprecated.</p><p>The Keyword (second dot tier) should be the most concise description possible of the part of the addon it governs.</p><p>Whenever possible, use one of the following as your Action (third dot tier):</p><ul><li>Add</li><li>Edit</li><li>View</li><li>Manage</li><li>Delete</li></ul><p>Other action names are avoided and may be renamed or refactored out of the framework in the future. However, they are not forbidden and never will be.</p><h3 id=using-permissions>Using Permissions</h3><p>There are two basic ways to check a permission. One is to use a true/false conditional, typically to <code>CheckPermission()</code> in an <code>if</code> statement:</p><pre class=highlight><code class="hljs cs"><span class=hljs-keyword>if</span> (CheckPermission(<span class=hljs-string>'Permission.Name'</span>)) {
    <span class=hljs-comment>// Do something special</span>
}
</code></pre><p>The other is to wholesale block execution by a call to <code>Gdn::Session-&gt;Permission()</code>. This method automatically triggers a permission exception:</p><pre class=highlight><code class="hljs php"><span class=hljs-keyword>public</span> <span class=hljs-function><span class=hljs-keyword>function</span> <span class=hljs-title>Index</span><span class=hljs-params>()</span> {</span>
    Gdn::Session()-&gt;Permission(<span class=hljs-string>'Permission.Name'</span>);
    <span class=hljs-comment>// Do priviliged things safely now</span>
}
</code></pre><p>Typically we don&#39;t use the first convention to trigger a permission exception manually because the second will cover it.</p><h3 id=multiple-permissions>Multiple Permissions</h3><p>You can use either method above to check multiple permissions by passing an array of permission names as the first parameter.</p><p>By default, it will require ALL permissions named to pass. If you pass a second parameter of <code>false</code>, then only ONE of the permissions is needed to pass.</p><p>You may find additional permission checks in Vanilla for permission names that do not appear in the Dashboard using this style: a normal permission name is passed in an array along with an &quot;invisible&quot; one. This is to allow plugins to define the additional permissions for more granular checks if neeeded.</p><h3 id=the-owner-flag>The Owner Flag</h3><p>The forum owner&#39;s account (the one you create when installing Vanilla) gets a special flag set on it. This is accomplished by setting the <code>Admin</code> column equal to <code>1</code> in the <code>User</code> table.</p><p>Accounts with this flag set bypass all permission checks. <code>CheckPermission</code> will always return <code>true</code> and no permission exception will ever be thrown for it. It will do this regardless of any role assignment.</p><p>For this reason, it is extremely important to test your addons with a non-owner account to see your permission checks in action.</p><h3 id=the-system-flag>The System Flag</h3><p>The System account is generated for general use by addons and cases where content must be generated by the forum. This account is designated by setting the <code>Admin</code> column equal to <code>2</code> in the <code>User</code> table.</p><p>This grants the same privileges as the Owner flag, and protects the account from deletion or banning.</p><h3 id=reversed-permission>Reversed Permission</h3><p>A special case in the framework is the <code>Vanilla.Approval.Require</code> permission. It is checked with the <code>CheckRequirement</code> function. A <code>true</code> result means their content must go to the Moderation queue for approval. Therefore, a <code>true</code> result actually grants you <em>less</em> permission. We don&#39;t generally recommend using this construct.</p></article></div></div></div><footer class="footer js-footer"><div class=jumbotron><div class=container><div class=row><div class=col-sm-6><h3><a href=#>Cloud Hosting</a></h3><p><strong>We believe that online communities should be intuitive, engaging and true to your brand.</strong> Vanilla allows you to create a customized community that rewards positive participation, automatically curates content and lets members drive moderation.</p></div><div class=col-sm-6><h3><a href=#>Open Source</a></h3><p>Vanilla provides cloud and open source community forum software that powers discussion forums on more than 700,000 sites. Built for flexibility and integration, <strong>Vanilla is the best, most powerful community solution in the world.</strong></p></div></div></div></div><div class=footer-copyright><div class=container><p class=text-center>Copyright &copy; 2009-2014 <a href=//vanillaforums.com>Vanilla Forums Inc.</a> All rights reserved.</p><ul class="list-inline text-center"><li><a href=//docs.vanillaforums.com>Docs</a></li><li><a href=//blog.vanillaforums.com>Blog</a></li><li><a href=//vanillaforums.com>Cloud</a></li><li><a href=//vanillaforums.org>Community</a></li><li><a href=https://github.com/vanilla>GitHub</a></li><li><a href=https://github.com/vanilla/vanilla/issues>Issues</a></li></ul></div></div></footer><script src=/assets/38fe62d5.main.js></script>